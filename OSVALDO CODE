#include <Servo.h>

int pos = 0;  // Initial position for the servo
int lastButtonState = LOW;  // Stores the last button state
int buttonState = 0;  // Current button state

Servo servo_9;  // Servo object

const int buttonPin = 2;  // Button connected to pin 2
const int debounceDelay = 50;  // Debounce time in milliseconds

void setup() {
  pinMode(buttonPin, INPUT_PULLUP);  // Enable internal pull-up resistor
  servo_9.attach(9);  // Attach servo to pin 9
  servo_9.write(pos);  // Set initial position
}

void loop() {
  buttonState = digitalRead(buttonPin);  // Read button state

  // Detect button press (LOW because of INPUT_PULLUP)
  if (buttonState == LOW && lastButtonState == HIGH) {
    delay(debounceDelay);  // Debounce delay
    if (digitalRead(buttonPin) == LOW) {  // Ensure button is still pressed
      pos = (pos == 0) ? 90 : 0;  // Toggle between 0 and 90 degrees
      servo_9.write(pos);  // Move the servo
    }
  }

  lastButtonState = buttonState;  // Store button state for next loop iteration
}

/*
#include <SoftwareSerial.h>
#include <Servo.h>

SoftwareSerial mySerial(10, 11); // RX, TX
Servo myServo;  //servo on pin 9
int ledRed = 8;
int ledBlu = 7;
int dir;

void setup()  
{
  Serial.begin(9600);
  Serial.println("RFID Reader Start:");
  mySerial.begin(9600);
  pinMode(ledRed, OUTPUT);
  pinMode(ledBlu, OUTPUT);
  myServo.attach(9);
}

void loop() 
{
  myServo.write(1);
  digitalWrite(ledRed, HIGH);
  digitalWrite(ledBlu, LOW);
  if (mySerial.available())
  {
    Serial.write(mySerial.read());
    digitalWrite(ledRed, LOW);
    digitalWrite(ledBlu, HIGH);
    myServo.write(170);
  } 
  delay(500);
}
*/
